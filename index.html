<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>전자기력 경로 탐색 문제</title>
  <style>
    table {
      border-collapse: collapse;
      margin: 20px 0;
    }
    td {
      width: 50px;
      height: 50px;
      border: 1px solid #aaa;
      text-align: center;
      font-size: 20px;
      cursor: pointer;
    }
    .start {
      background-color: #fdd;
    }
    .end {
      background-color: #dfd;
    }
    .x, .o {
      font-weight: bold;
    }
    .arrow {
      font-size: 24px;
      color: green;
    }
    #result {
      margin-top: 10px;
      font-weight: bold;
    }
    button {
      margin: 10px 5px;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <h2>전자기력에 따른 전자의 이동 경로 탐색</h2>
  <p>출발점: (0, 0) → 아래 방향으로 시작<br>도착점: (6, 3)</p>
  <table id="grid"></table>
  <button onclick="checkAnswer()">정답 확인</button>
  <div id="result"></div>

  <script>
    const map = [
      ['S', '', '', ''],
      ['', '', '', ''],
      ['', '', '', ''],
      ['o', '', '', ''],
      ['o', '', '', ''],
      ['', '', '', ''],
      ['', '', '', 'E']
    ];

    const correctPath = [
      [0,0], [1,0], [2,0], [3,0], [4,0], [5,0], [5,1], [5,2], [5,3], [6,3]
    ];

    let currentDir = '↓';
    let userPath = [];
    let clickCount = 0;
    let wrongCount = 0;

    const dirArrows = {
      '→': '→',
      '↓': '↓',
      '←': '←',
      '↑': '↑'
    };

    function createGrid() {
      const table = document.getElementById('grid');
      for (let i = 0; i < map.length; i++) {
        const row = document.createElement('tr');
        for (let j = 0; j < map[0].length; j++) {
          const cell = document.createElement('td');
          cell.dataset.row = i;
          cell.dataset.col = j;

          if (map[i][j] === 'S') {
            cell.className = 'start';
            cell.textContent = 'S';
          } else if (map[i][j] === 'E') {
            cell.className = 'end';
            cell.textContent = 'E';
          } else if (map[i][j] === 'x') {
            cell.className = 'x';
            cell.textContent = 'x';
          } else if (map[i][j] === 'o') {
            cell.className = 'o';
            cell.textContent = 'o';
          }

          cell.addEventListener('click', () => {
            if (cell.textContent === '' || cell.classList.contains('arrow')) {
              clickCount++;
              const dir = prompt('방향을 입력하세요 (→, ↓, ←, ↑):');
              if (dirArrows[dir]) {
                cell.textContent = dirArrows[dir];
                cell.classList.add('arrow');
                userPath.push([parseInt(cell.dataset.row), parseInt(cell.dataset.col)]);
              }
            }
          });

          row.appendChild(cell);
        }
        table.appendChild(row);
      }
    }

    function arraysEqual(a1, a2) {
      return a1.length === a2.length && a1.every((v, i) => v[0] === a2[i][0] && v[1] === a2[i][1]);
    }

    function checkAnswer() {
      const result = document.getElementById('result');
      if (arraysEqual(userPath, correctPath)) {
        result.textContent = '정답입니다!';
        result.style.color = 'green';
      } else {
        wrongCount++;
        if (wrongCount >= 2) {
          result.innerHTML = '두 번 이상 틀렸습니다. 정답 경로:<br>' + correctPath.map(p => `(${p[0]},${p[1]})`).join(' → ');
          result.style.color = 'red';
        } else {
          result.textContent = '틀렸습니다. 다시 시도해보세요!';
          result.style.color = 'orange';
        }
      }
    }

    createGrid();
  </script>
</body>
</html>
