<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì „ì ë¯¸ë¡œ</title>
  <style>
    body { font-family: 'ë§‘ì€ ê³ ë”•', sans-serif; background: #fafafa; }
    h2, .description, #controls { text-align: center; }
    table { border-collapse: collapse; margin: 10px auto; }
    td {
      width: 50px; height: 50px;
      text-align: center; vertical-align: middle;
      border: 1px solid #333; font-size: 24px; cursor: pointer;
      transition: background-color 0.2s;
    }
    td:hover { background-color: #f3f4f6; }

    .start { background-color: #a3e635; font-weight: bold; }
    .end { background-color: #60a5fa; font-weight: bold; }
    .path { background-color: #facc15; }
    .correct { background-color: #fb923c; }

    #controls { margin-top: 20px; }

    .description {
      width: 80%; margin: 10px auto; text-align: left;
      background: #f1f1f1; padding: 15px; border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .electron-icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      background-image: url('https://cdn-icons-png.flaticon.com/512/2690/2690110.png'); /* ë³€ê²½ëœ ì„ ëª…í•œ ì•„ì´ì½˜ */
      background-size: cover;
      vertical-align: middle;
      margin-left: 5px;
    }

    button {
      padding: 8px 16px;
      margin: 0 10px;
      border: none;
      background-color: #3b82f6;
      color: white;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }

    button:hover {
      background-color: #2563eb;
    }
  </style>
</head>
<body>

<h2>ì „ì ë¯¸ë¡œ ë¬¸ì œ</h2>

<div class="description">
  <p><strong>ğŸ§© ë¬¸ì œ ì„¤ëª…:</strong></p>
  <ul>
    <li>ì „ìëŠ” ì¶œë°œì§€ì (ì™¼ìª½ ìœ„)ì—ì„œ ì‹œì‘í•˜ì—¬ ë„ì°©ì§€ì (ì˜¤ë¥¸ìª½ ì•„ë˜)ê¹Œì§€ ë„ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.</li>
    <li>ì „ìëŠ” í•­ìƒ <strong>ì˜¤ë¥¸ìª½ ë°©í–¥(â†’)</strong>ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.</li>
  </ul>

  <p><strong>ğŸ” ì´ë™ ê·œì¹™:</strong></p>
  <ul>
    <li><code>ë¹ˆì¹¸</code>: ì „ìëŠ” í˜„ì¬ ë°©í–¥ ê·¸ëŒ€ë¡œ ì´ë™</li>
    <li><code>+</code>: ì „ìëŠ” <strong>ì‹œê³„ë°©í–¥ 90ë„</strong> íšŒì „ í›„ ì´ë™</li>
    <li><code>-</code>: ì „ìëŠ” <strong>ë°˜ì‹œê³„ë°©í–¥ 90ë„</strong> íšŒì „ í›„ ì´ë™</li>
  </ul>

  <p><strong>ğŸ–±ï¸ í’€ì´ ë°©ë²•:</strong></p>
  <ul>
    <li>ì¶œë°œì§€ì ë¶€í„° ë„ì°©ì§€ì ê¹Œì§€ ì „ìê°€ ì´ë™í•  ê²½ë¡œë¥¼ ë§ˆìš°ìŠ¤ë¡œ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”.</li>
    <li><strong>ì •ë‹µ í™•ì¸</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹¤ì œ ì „ìì˜ ê²½ë¡œê°€ ì£¼í™©ìƒ‰ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</li>
  </ul>
</div>

<div id="maze-container"></div>

<div id="controls">
  <button onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
  <button onclick="generateMaze()">ìƒˆ ë¬¸ì œ ìƒì„±</button>
</div>

<script>
const SIZE = 5;
let maze = [], userPath = [], solutionPath = [];
const dirs = ["up", "right", "down", "left"];
const dirMap = {
  up: [-1, 0],
  down: [1, 0],
  left: [0, -1],
  right: [0, 1]
};

function rotate(dir, isPlus) {
  let idx = dirs.indexOf(dir);
  return dirs[(idx + (isPlus ? 1 : 3)) % 4];
}

function drawMaze() {
  const container = document.getElementById("maze-container");
  container.innerHTML = "";
  const table = document.createElement("table");
  for (let i = 0; i < SIZE; i++) {
    const row = document.createElement("tr");
    for (let j = 0; j < SIZE; j++) {
      const cell = document.createElement("td");
      cell.dataset.row = i;
      cell.dataset.col = j;
      const val = maze[i][j];
      if (i === 0 && j === 0) {
        cell.classList.add("start");
        cell.innerHTML = `â†’<span class="electron-icon"></span>`;
      } else if (i === SIZE - 1 && j === SIZE - 1) {
        cell.classList.add("end");
        cell.innerText = "ë„ì°©";
      } else {
        cell.innerText = val;
      }
      cell.onclick = () => togglePath(i, j);
      row.appendChild(cell);
    }
    table.appendChild(row);
  }
  container.appendChild(table);
}

function togglePath(row, col) {
  const td = document.querySelector(`td[data-row='${row}'][data-col='${col}']`);
  const key = `${row},${col}`;
  if (userPath.includes(key)) {
    userPath = userPath.filter(k => k !== key);
    td.classList.remove("path");
  } else {
    userPath.push(key);
    td.classList.add("path");
  }
}

function checkAnswer() {
  clearCorrectPath();
  for (const key of solutionPath) {
    const [row, col] = key.split(',').map(Number);
    document.querySelector(`td[data-row='${row}'][data-col='${col}']`).classList.add("correct");
  }
}

function simulatePath(mz) {
  let path = [];
  let dir = "right";
  let row = 0, col = 0;
  path.push("0,0");

  for (let step = 0; step < SIZE * SIZE; step++) {
    let cell = mz[row][col];
    if (cell === "+") dir = rotate(dir, true);
    else if (cell === "-") dir = rotate(dir, false);
    let [dr, dc] = dirMap[dir];
    let nr = row + dr, nc = col + dc;
    if (nr < 0 || nr >= SIZE || nc < 0 || nc >= SIZE) return null;
    path.push(`${nr},${nc}`);
    row = nr; col = nc;
    if (row === SIZE - 1 && col === SIZE - 1) return path;
  }
  return null;
}

function generateMaze() {
  let valid = false;
  while (!valid) {
    maze = Array.from({ length: SIZE }, () =>
      Array.from({ length: SIZE }, () => {
        const r = Math.random();
        return r < 0.3 ? "+" : r < 0.6 ? "-" : "";
      })
    );
    maze[0][0] = "";
    maze[SIZE - 1][SIZE - 1] = "";
    let path = simulatePath(maze);
    if (path) {
      solutionPath = path;
      valid = true;
    }
  }
  userPath = [];
  drawMaze();
}

function clearCorrectPath() {
  document.querySelectorAll("td").forEach(td => td.classList.remove("correct"));
}

generateMaze();
</script>

</body>
</html>
